<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Riwayat Saldo</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <style type="text/css">
        .dot-spinner {
            --uib-size: 5rem;
            --uib-speed: .9s;
            --uib-color: #002140;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            height: var(--uib-size);
            width: var(--uib-size);
        }

        .dot-spinner__dot {
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            height: 100%;
            width: 100%;
        }

        .dot-spinner__dot::before {
            content: '';
            height: 20%;
            width: 20%;
            border-radius: 50%;
            background-color: var(--uib-color);
            transform: scale(0);
            opacity: 0.5;
            animation: pulse0112 calc(var(--uib-speed) * 1.111) ease-in-out infinite;
            box-shadow: 0 0 20px rgba(18, 31, 53, 0.3);
        }

        .dot-spinner__dot:nth-child(2) {
            transform: rotate(45deg);
        }

        .dot-spinner__dot:nth-child(2)::before {
            animation-delay: calc(var(--uib-speed) * -0.875);
        }

        .dot-spinner__dot:nth-child(3) {
            transform: rotate(90deg);
        }

        .dot-spinner__dot:nth-child(3)::before {
            animation-delay: calc(var(--uib-speed) * -0.75);
        }

        .dot-spinner__dot:nth-child(4) {
            transform: rotate(135deg);
        }

        .dot-spinner__dot:nth-child(4)::before {
            animation-delay: calc(var(--uib-speed) * -0.625);
        }

        .dot-spinner__dot:nth-child(5) {
            transform: rotate(180deg);
        }

        .dot-spinner__dot:nth-child(5)::before {
            animation-delay: calc(var(--uib-speed) * -0.5);
        }

        .dot-spinner__dot:nth-child(6) {
            transform: rotate(225deg);
        }

        .dot-spinner__dot:nth-child(6)::before {
            animation-delay: calc(var(--uib-speed) * -0.375);
        }

        .dot-spinner__dot:nth-child(7) {
            transform: rotate(270deg);
        }

        .dot-spinner__dot:nth-child(7)::before {
            animation-delay: calc(var(--uib-speed) * -0.25);
        }

        .dot-spinner__dot:nth-child(8) {
            transform: rotate(315deg);
        }

        .dot-spinner__dot:nth-child(8)::before {
            animation-delay: calc(var(--uib-speed) * -0.125);
        }

        @keyframes pulse0112 {

            0%,
            100% {
                transform: scale(0);
                opacity: 0.5;
            }

            50% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /*---------- End Loader ----------*/
        .loading {
            margin-top: 5rem
        }

        .produk-none {
            margin-top: 1.75rem;
            padding: 16px;
        }

        .produk-none img {
            width: 75%;
            border-radius: 5px
        }

        .produk-none p {
            font-size: 16px;
            font-weight: 600;
            opacity: 0.7;
        }

        @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css");

        * {
            font-family: 'Poppins', sans-serif;
            user-select: none;
        }

        body {
            background-color: #fff;
        }

        p {
            margin: 0;
            font-size: 12px
        }

        input {
            border: none;
            -webkit-transition: 0.5s;
            transition: 0.5s;
            outline: none;
            width: 100%;
            background-color: transparent;
        }

        a,
        a:focus,
        a:hover {
            text-decoration: none;
            color: inherit;
        }

        @-webkit-keyframes fadeEffect {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeEffect {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .my-bg {
            background-color: #002140
        }

        .my-color {
            color: #002140
        }

        .borad-5 {
            border-radius: 5px
        }

        .borad-10 {
            border-radius: 10px
        }

        .borad-15 {
            border-radius: 15px
        }

        .my-shadow {
            box-shadow: rgba(0, 0, 0, 0.15) 0 0 5px 1px;
        }

        .bg-white {
            background-color: #fff !important
        }

        .text-white {
            color: #fff
        }

        .f-8 {
            font-size: 8px !important
        }

        .f-9 {
            font-size: 9px !important
        }

        .f-10 {
            font-size: 10px !important
        }

        .f-11 {
            font-size: 11px !important
        }

        .f-12 {
            font-size: 12px !important
        }

        .f-13 {
            font-size: 13px !important
        }

        .f-14 {
            font-size: 14px !important
        }

        .f-16 {
            font-size: 16px !important
        }

        .f-18 {
            font-size: 18px !important
        }

        .f-20 {
            font-size: 20px !important
        }

        .f-22 {
            font-size: 22px !important
        }

        .f-24 {
            font-size: 24px !important
        }

        .f-26 {
            font-size: 26px !important
        }

        .f-28 {
            font-size: 28px !important
        }

        .fwb-5 {
            font-weight: 500
        }

        .fwb-6 {
            font-weight: 600
        }

        .op-7 {
            opacity: 0.7
        }

        .my-btn {
            background-color: #002140;
            border: none;
            padding: 12px;
            border-radius: 5px;
            width: 100%;
        }

        .my-btn-2 {
            border: 1px solid #002140;
            padding: 12px;
            border-radius: 5px;
            width: 100%;
            background-color: transparent;
        }

        .linked,
        .linked:hover,
        .linked:focus {
            color: #002140;
            text-decoration: underline;
        }

        .tab div {
            padding: 16px;
            font-weight: 600;
            opacity: 0.7;
            font-size: 16px;
            width:101%;
        }

        .tab div.active {
            border-bottom: 2px solid #002140;
            opacity: 1;
            color: #002140
        }

        .tabcontent {
            -webkit-animation: fadeEffect 1s;
            animation: fadeEffect 1s;
        }

        .data-trx {
            padding: 16px
        }
    </style>
</head>

<body>

    <section class="header">
        <div class="my-bg" style="height: 55px;"></div>
        <div class="p-3 pb-0" style="margin-top: -55px;">
            <div class="bg-white my-shadow p-3 borad-5">
                <p class="f-14 fwb-6 op-7">Saldo FastReload</p>
                <a href="https://waroengppob.bukaolshop.site/refresh_saldo">
                <div class="d-flex align-items-center">
                    <p class="f-18 fwb-6" id="saldo_user">{{saldo_user}}</p>
                    <!-- <p class="f-18 fwb-6 ms-1"><i class="fa-solid fa-rotate-right"></i></p> -->
                </div>
                </a>
            </div>
        </div>
    </section>

    <section class="pilihan">
        <div class="shadow-sm">
            <div class="justify-content-center d-flex align-items-center tab">
                <div class="text-center tablinks active" onclick="openCity(event, 'tab-1');" id="defaultOpen">SEMUA
                </div>
                <div class="text-center tablinks" onclick="openCity(event, 'tab-2');">KREDIT</div>
                <div class="text-center tablinks" onclick="openCity(event, 'tab-3');">DEBET
                </div>
            </div>
        </div>
    </section>

    <section id="boxLoad"></section>

    <section class="isi-tab">

        <div id="tab-1" class="tabcontent">
            <section class="data-trx">
                <div class="animate__animated animate__fadeIn" id="dataSemua">
                </div>
            </section>
        </div>

        <div id="tab-2" class="tabcontent">
            <section class="data-trx">
                <div class="animate__animated animate__fadeIn" id="dataMasuk"></div>
            </section>
        </div>

        <div id="tab-3" class="tabcontent">
            <section class="data-trx">
                <div class="animate__animated animate__fadeIn" id="dataKeluar"></div>
            </section>
        </div>

    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script src="https://nielz.my.id/assets/accounting.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="text/javascript">
        // SET

        var imgLogoMasuk = 'https://i.ibb.co/0sRQQQF/buat-apk-picsay.png'
        var imgLogoKeluar = 'https://i.ibb.co/0sRQQQF/buat-apk-picsay.png'

        var loads = `<div class="d-flex justify-content-center py-5 mt-5">
        <div class="dot-spinner">
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        <div class="dot-spinner__dot"></div>
        </div>
        </div>`


        var produkNone = ``

        var idUser = '{{id_user}}'
        var tokenUser = '{{token_user}}'
        var pageUser = 5

    var _0x1beb = ["https://openapi.bukaolshop.net/v1/user/catatan"]; var baseUrl = _0x1beb[0]
    var _0xffa5 = ["eyJhcHAiOiI2NzczMCIsImF1dGgiOiIyMDIxMDUwNyIsInNpZ24iOiJMTXZoUUhMSkZTQit4S3hDcjhMbWhRPT0ifQ=="]; var _0xffx = _0xffa5[0]


    function getMutasi(_0x5eaf48) {
  $.ajax({
    'method': 'GET',
    'url': baseUrl,
    'data': {
      'token': _0xffx,
      'token_user': tokenUser,
      'id_user': idUser,
      'tipe': "saldo",
      'page': _0x5eaf48
    },
    'dataType': "JSON",
    'success': function (_0x1aa2f8) {
      $("#boxLoad").html('');
      console.log(_0x1aa2f8);
      if (_0x1aa2f8.code == 0xc8) {
        if (_0x1aa2f8.data.length != 0x0) {
          if (_0x1aa2f8.data.length == 0xa) {
            if (_0x5eaf48 + 0x1 <= pageUser) {
              getNext(_0x5eaf48 + 0x1);
            }
          }
          loopData(_0x1aa2f8.data);
        } else {
          $("#dataMasuk").html(produkNone);
          $("#dataKeluar").html(produkNone);
          $("#dataSemua").html(produkNone);
        }
      } else {
        $("#dataMasuk").html(produkNone);
        $("#dataKeluar").html(produkNone);
        $("#dataSemua").html(produkNone);
      }
    }
  });
}
function getNext(_0x2329d0) {
  $.ajax({
    'method': "GET",
    'url': baseUrl,
    'data': {
      'token': _0xffx,
      'token_user': tokenUser,
      'id_user': idUser,
      'tipe': "saldo",
      'page': _0x2329d0
    },
    'dataType': "JSON",
    'success': function (_0x228dfc) {
      console.log(_0x228dfc);
      if (_0x228dfc.data.length == 0xa) {
        if (_0x2329d0 + 0x1 <= pageUser) {
          getNext(_0x2329d0 + 0x1);
        }
      }
      loopData(_0x228dfc.data);
    }
  });
}
getMutasi(1);


        function noData() {
            $("#dataMasuk").html(produkNone)
            $("#dataKeluar").html(produkNone)
            $("#dataSemua").html(produkNone)
        }

        function loopData(data) {
            $.each(data, function (i, v) {
                let jenis, warna, text, jml

                var inf = v.informasi_catatan.replace('Anda', 'Anda')
                var infer = inf.replace('Member', 'Anda')
                var infin = infer.replace('dari aplikasi bukaOlshop', '')
                var infos = infin.replace('melalui API', '')
                var cek1 = infos.split('melakukan transaksi menggunakan saldo')[1]
                if (cek1 != undefined) {
                    jenis = 'Saldo Keluar'
                    text = infos
                    warna = 'text-danger'
                    jml = '-Rp' + accounting.formatNumber(v.jumlah_dana)
                } else {
                    if (infer == 'Admin mengurangi saldo secara manual dari aplikasi bukaOlshop' ||
                        infer == 'Admin melakukan perubahan saldo melalui API (kurang)') {
                        jenis = 'Saldo Keluar'
                        text = infos
                        warna = 'text-danger'
                        jml = '-Rp' + accounting.formatNumber(v.jumlah_dana)
                    } else {
                        jenis = 'Saldo Masuk'
                        text = infos
                        warna = 'text-success'
                        jml = '+Rp' + accounting.formatNumber(v.jumlah_dana)
                    }
                }

                var dataTgl = v.tanggal.split(" ")[0]
                var tgl = dataTgl.split("-")[2]
                var bln = dataTgl.split("-")[1]
                var thn = dataTgl.split("-")[0]


                var xTan = bln
                let naBul
                if (xTan == 1) {
                    naBul = "Jan"
                } else if (xTan == 2) {
                    naBul = "Feb"
                } else if (xTan == 3) {
                    naBul = "Mar"
                } else if (xTan == 4) {
                    naBul = "Apr"
                } else if (xTan == 5) {
                    naBul = "Mei"
                } else if (xTan == 6) {
                    naBul = "Jun"
                } else if (xTan == 7) {
                    naBul = "Jul"
                } else if (xTan == 8) {
                    naBul = "Aug"
                } else if (xTan == 9) {
                    naBul = "Sep"
                } else if (xTan == 10) {
                    naBul = "Okt"
                } else if (xTan == 11) {
                    naBul = "Nov"
                } else if (xTan == 12) {
                    naBul = "Des"
                }

                var tanggalku = tgl + " " + naBul + " " + thn


                var dataJam = v.tanggal.split(" ")[1]
                var jam = dataJam.split(":")[0]
                var menit = dataJam.split(":")[1]
                var waktuKu = jam + ":" + menit

                var times = tanggalku + " · " + waktuKu

                if (jenis == 'Saldo Masuk') {
                    logoAll = imgLogoMasuk
                } else {
                    logoAll = imgLogoKeluar
                }

                $("#dataSemua").append(`
                <div class="">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="w-100">
                                <p class="op-7 f-13 fwb-6">${text}</p>
                                <p class="op-7 f-11">${times}</p>
                        </div>
                        <p class="fwb-6 f-14 text-end ${warna}" style="width:45%">${jml}</p>
                    </div>
    <hr>
                </div>
                `)

                if (jenis == 'Saldo Masuk') {
                    $("#dataMasuk").append(`
                    <div class="">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="w-100">
                                <p class="op-7 f-13 fwb-6">${text}</p>
                                <p class="op-7 f-11">${times}</p>
                            </div>
                            <p class="fwb-6 f-14 text-end ${warna}" style="width:45%">${jml}</p>
                        </div><hr>
                    </div>
                    `)
                } else {
                    $("#dataKeluar").append(`
                    <div class="">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="w-100">
                                <p class="op-7 f-13 fwb-6">${text}</p>
                                <p class="op-7 f-11">${times}</p>
                            </div>
                            <p class="fwb-6 f-14 text-end ${warna}" style="width:45%">${jml}</p>
                        </div><hr>
                    </div>
                    `)
                }



            })
            cekKosong()
        }

        function cekKosong() {
            var masuk = $("#dataMasuk").html()
            var keluar = $("#dataKeluar").html()
            var semua = $("#dataSemua").html()
            if (masuk == "") {
                $("#dataMasuk").html(produkNone)
            }
            if (keluar == "") {
                $("#dataKeluar").html(produkNone)
            }
            if (semua == "") {
                $("#dataSemua").html(produkNone)
            }
        }

        function openCity(evt, cityName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent"); for (i = 0; i <
                tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
            tablinks = document.getElementsByClassName("tablinks"); for (i = 0; i < tablinks.length;
                i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
            document.getElementById(cityName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        document.getElementById("defaultOpen").click(); function rubah(angka) {
            var
                reverse = angka.toString().split('').reverse().join(''),
                ribuan = reverse.match(/\d{1,3}/g);
            ribuan = ribuan.join('.').split('').reverse().join(''); return "Rp " + ribuan;
        }
        document.getElementById("saldo_user").innerText = rubah(document.getElementById("saldo_user").textContent);
    </script>
</body>

</html>
